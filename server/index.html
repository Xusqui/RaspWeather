<html>
<head>
<title>IP Anemometer</title>

<link rel="stylesheet" type="text/css" href="ipa.css" />

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="ipa.js"></script>
<script type="text/javascript">

google.setOnLoadCallback(updateChart);

var clearElement = function(element) {
  while (element.firstChild) {
    element.removeChild(element.firstChild);
  }
  return element;
}

function updateChart() {
  var options = {
    minutes: document.getElementById('minutesInput').value
  }
  var chart = new ipa.Chart(options);
  chart.requestStats();

  chart.drawSummary(clearElement(document.getElementById('summary')));
  chart.drawTimeSeries(clearElement(document.getElementById('time')));
  chart.drawHistogram(clearElement(document.getElementById('hist')));
  chart.drawTemperature(clearElement(document.getElementById('temp')));
}

function handleKeyPress(event) {
  if (event.keyCode == 13) {
    updateChart();
  }
}
</script>

</head>
<body>
<div id="minutes" align="center">
  Minutes:
  <input id="minutesInput" type="text" maxlength="4" size="4" onkeypress="handleKeyPress(event)" value="60" />
  <button onclick="updateChart()">Load</button>
</div>
<div id="summary" align="center"></div>
<div id="time"></div>
<div id="hist"></div>
<div id="temp"></div>

</body>
</html>
